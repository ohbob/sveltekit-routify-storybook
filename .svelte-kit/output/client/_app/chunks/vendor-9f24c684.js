var ht=Object.defineProperty,dt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var me=(n,e,t)=>e in n?ht(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,S=(n,e)=>{for(var t in e||(e={}))Ae.call(e,t)&&me(n,t,e[t]);if(Z)for(var t of Z(e))He.call(e,t)&&me(n,t,e[t]);return n},W=(n,e)=>dt(n,mt(e));var V=(n,e)=>{var t={};for(var r in n)Ae.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Z)for(var r of Z(n))e.indexOf(r)<0&&He.call(n,r)&&(t[r]=n[r]);return t};var d=(n,e,t)=>(me(n,typeof e!="symbol"?e+"":e,t),t),ve=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var C=(n,e,t)=>(ve(n,e,"read from private field"),t?t.call(n):e.get(n)),ge=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},qe=(n,e,t,r)=>(ve(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);function U(){}function _e(n,e){for(const t in e)n[t]=e[t];return n}function Te(n){return n()}function De(){return Object.create(null)}function D(n){n.forEach(Te)}function pe(n){return typeof n=="function"}function z(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function gt(n){return Object.keys(n).length===0}function $(n,...e){if(n==null)return U;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function O(n){let e;return $(n,t=>e=t)(),e}function xn(n,e,t){n.$$.on_destroy.push($(e,t))}function be(n,e,t,r){if(n){const s=Be(n,e,t,r);return n[0](s)}}function Be(n,e,t,r){return n[1]&&r?_e(t.ctx.slice(),n[1](r(e))):t.ctx}function ye(n,e,t,r){if(n[2]&&r){const s=n[2](r(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(e.dirty.length,s.length);for(let a=0;a<i;a+=1)o[a]=e.dirty[a]|s[a];return o}return e.dirty|s}return e.dirty}function we(n,e,t,r,s,o){if(s){const i=Be(e,t,r,o);n.p(i,s)}}function Re(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Le(n){return n&&pe(n.destroy)?n.destroy:U}let ee=!1;function _t(){ee=!0}function pt(){ee=!1}function bt(n,e,t,r){for(;n<e;){const s=n+(e-n>>1);t(s)<=r?n=s+1:e=s}return n}function yt(n){if(n.hydrate_init)return;n.hydrate_init=!0;let e=n.childNodes;if(n.nodeName==="HEAD"){const l=[];for(let c=0;c<e.length;c++){const u=e[c];u.claim_order!==void 0&&l.push(u)}e=l}const t=new Int32Array(e.length+1),r=new Int32Array(e.length);t[0]=-1;let s=0;for(let l=0;l<e.length;l++){const c=e[l].claim_order,u=(s>0&&e[t[s]].claim_order<=c?s+1:bt(1,s,g=>e[t[g]].claim_order,c))-1;r[l]=t[u]+1;const f=u+1;t[f]=l,s=Math.max(f,s)}const o=[],i=[];let a=e.length-1;for(let l=t[s]+1;l!=0;l=r[l-1]){for(o.push(e[l-1]);a>=l;a--)i.push(e[a]);a--}for(;a>=0;a--)i.push(e[a]);o.reverse(),i.sort((l,c)=>l.claim_order-c.claim_order);for(let l=0,c=0;l<i.length;l++){for(;c<o.length&&i[l].claim_order>=o[c].claim_order;)c++;const u=c<o.length?o[c]:null;n.insertBefore(i[l],u)}}function wt(n,e){if(ee){for(yt(n),(n.actual_end_child===void 0||n.actual_end_child!==null&&n.actual_end_child.parentElement!==n)&&(n.actual_end_child=n.firstChild);n.actual_end_child!==null&&n.actual_end_child.claim_order===void 0;)n.actual_end_child=n.actual_end_child.nextSibling;e!==n.actual_end_child?(e.claim_order!==void 0||e.parentNode!==n)&&n.insertBefore(e,n.actual_end_child):n.actual_end_child=e.nextSibling}else(e.parentNode!==n||e.nextSibling!==null)&&n.appendChild(e)}function x(n,e,t){ee&&!t?wt(n,e):(e.parentNode!==n||e.nextSibling!=t)&&n.insertBefore(e,t||null)}function w(n){n.parentNode.removeChild(n)}function Ne(n){return document.createElement(n)}function Ee(n){return document.createTextNode(n)}function Rt(){return Ee(" ")}function R(){return Ee("")}function In(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function ke(n){return Array.from(n.childNodes)}function Nt(n){n.claim_info===void 0&&(n.claim_info={last_index:0,total_claimed:0})}function Me(n,e,t,r,s=!1){Nt(n);const o=(()=>{for(let i=n.claim_info.last_index;i<n.length;i++){const a=n[i];if(e(a)){const l=t(a);return l===void 0?n.splice(i,1):n[i]=l,s||(n.claim_info.last_index=i),a}}for(let i=n.claim_info.last_index-1;i>=0;i--){const a=n[i];if(e(a)){const l=t(a);return l===void 0?n.splice(i,1):n[i]=l,s?l===void 0&&n.claim_info.last_index--:n.claim_info.last_index=i,a}}return r()})();return o.claim_order=n.claim_info.total_claimed,n.claim_info.total_claimed+=1,o}function Et(n,e,t,r){return Me(n,s=>s.nodeName===e,s=>{const o=[];for(let i=0;i<s.attributes.length;i++){const a=s.attributes[i];t[a.name]||o.push(a.name)}o.forEach(i=>s.removeAttribute(i))},()=>r(e))}function We(n,e,t){return Et(n,e,t,Ne)}function kt(n,e){return Me(n,t=>t.nodeType===3,t=>{const r=""+e;if(t.data.startsWith(r)){if(t.data.length!==r.length)return t.splitText(r.length)}else t.data=r},()=>Ee(e),!0)}function St(n){return kt(n," ")}function Fn(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Ut(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}let G;function J(n){G=n}function K(){if(!G)throw new Error("Function called outside component initialization");return G}function Pn(n){K().$$.on_mount.push(n)}function On(n){K().$$.after_update.push(n)}function Ct(n){K().$$.on_destroy.push(n)}function ze(n,e){K().$$.context.set(n,e)}function te(n){return K().$$.context.get(n)}const X=[],Ge=[],ne=[],Je=[],Ke=Promise.resolve();let Se=!1;function Xe(){Se||(Se=!0,Ke.then(Qe))}function jn(){return Xe(),Ke}function Ue(n){ne.push(n)}const Ce=new Set;let re=0;function Qe(){const n=G;do{for(;re<X.length;){const e=X[re];re++,J(e),xt(e.$$)}for(J(null),X.length=0,re=0;Ge.length;)Ge.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];Ce.has(t)||(Ce.add(t),t())}ne.length=0}while(X.length);for(;Je.length;)Je.pop()();Se=!1,Ce.clear(),J(n)}function xt(n){if(n.fragment!==null){n.update(),D(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ue)}}const se=new Set;let j;function B(){j={r:0,c:[],p:j}}function L(){j.r||D(j.c),j=j.p}function b(n,e){n&&n.i&&(se.delete(n),n.i(e))}function y(n,e,t,r){if(n&&n.o){if(se.has(n))return;se.add(n),j.c.push(()=>{se.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}}function Ye(n,e){const t={},r={},s={$$scope:1};let o=n.length;for(;o--;){const i=n[o],a=e[o];if(a){for(const l in i)l in a||(r[l]=1);for(const l in a)s[l]||(t[l]=a[l],s[l]=1);n[o]=a}else for(const l in i)s[l]=1}for(const i in r)i in t||(t[i]=void 0);return t}function xe(n){return typeof n=="object"&&n!==null?n:{}}function A(n){n&&n.c()}function Q(n,e){n&&n.l(e)}function I(n,e,t,r){const{fragment:s,on_mount:o,on_destroy:i,after_update:a}=n.$$;s&&s.m(e,t),r||Ue(()=>{const l=o.map(Te).filter(pe);i?i.push(...l):D(l),n.$$.on_mount=[]}),a.forEach(Ue)}function F(n,e){const t=n.$$;t.fragment!==null&&(D(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function It(n,e){n.$$.dirty[0]===-1&&(X.push(n),Xe(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function oe(n,e,t,r,s,o,i,a=[-1]){const l=G;J(n);const c=n.$$={fragment:null,ctx:null,props:o,update:U,not_equal:s,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:De(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};i&&i(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(f,g,..._)=>{const m=_.length?_[0]:g;return c.ctx&&s(c.ctx[f],c.ctx[f]=m)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](m),u&&It(n,f)),g}):[],c.update(),u=!0,D(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){_t();const f=ke(e.target);c.fragment&&c.fragment.l(f),f.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&b(n.$$.fragment),I(n,e.target,e.anchor,e.customElement),pt(),Qe()}J(l)}class ie{$destroy(){F(this,1),this.$destroy=U}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!gt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const M=[];function Ft(n,e){return{subscribe:le(n,e).subscribe}}function le(n,e=U){let t;const r=new Set;function s(a){if(z(n,a)&&(n=a,t)){const l=!M.length;for(const c of r)c[1](),M.push(c,n);if(l){for(let c=0;c<M.length;c+=2)M[c][0](M[c+1]);M.length=0}}}function o(a){s(a(n))}function i(a,l=U){const c=[a,l];return r.add(c),r.size===1&&(t=e(s)||U),a(n),()=>{r.delete(c),r.size===0&&(t(),t=null)}}return{set:s,update:o,subscribe:i}}function Ze(n,e,t){const r=!Array.isArray(n),s=r?[n]:n,o=e.length<2;return Ft(t,i=>{let a=!1;const l=[];let c=0,u=U;const f=()=>{if(c)return;u();const _=e(r?l[0]:l,i);o?i(_):u=pe(_)?_:U},g=s.map((_,m)=>$(_,p=>{l[m]=p,c&=~(1<<m),a&&f()},()=>{c|=1<<m}));return a=!0,f(),function(){D(g),u()}})}const Pt=n=>n.name.match(/\[\.\.\.(.+)\]/)?1:-1,Ot=n=>{var e;for(const t of[...n].reverse())for(const r of((e=t.node.parent)==null?void 0:e.children)||[])if(r.name.match(/\[\.\.\.(.+)\]/))return r},jt=n=>n.replace(/[?#].+/,"").replace(/\/$/,"").split("/").slice(1),At=(n,e)=>n.findIndex(t=>t.node===e),Ht=n=>Object.entries(n).reduce((e,[t,r])=>W(S({},e),{[t]:decodeURI(r)}),{});class ae{constructor(e,t,r){d(this,"_params",{});this.route=e,this.node=t,this.load=void 0,this.urlFragment=r,Object.defineProperty(this,"route",{enumerable:!1})}get params(){return this._params}setParams(e){this._params=Ht(e)}getParamsFromFragment(){const{getFieldsFromName:e,getValuesFromPath:t,mapFieldsWithValues:r}=this.route.router.instance.utils;return r(e(this.node.name),t(this.node.regex,this.urlFragment))}}const vt=["pushState","replaceState","popState"];class qt{constructor(e,t,r){d(this,"allFragments",[]);d(this,"loaded");d(this,"load",{status:200,error:null,maxage:null,props:{},redirect:null});if(this.router=e,this.url=t,this.mode=r,!e.rootNode){this.router.log.error("Can't navigate without a rootNode");const s=new Error("Can't navigate without a rootNode");throw Object.assign(s,{routify:{router:e}}),s}if(!vt.includes(r))throw new Error("url.mode must be pushState, replaceState or popState");this.allFragments=this._createFragments()}get fragments(){const e=this.allFragments.filter(t=>t.node.module);return this.router.transformFragments.run(e)}get params(){const e=this.url.match(/\?.+/),t=e&&e[0]||"";return Object.assign({},...this.allFragments.map(r=>r.params),this.router.queryHandler.parse(t,this))}async loadRoute(){const{router:e}=this,t=[this.runBeforeUrlChangeHooks,this.loadComponents,this.runGuards,this.runPreloads];return this.loaded=new Promise(async(r,s)=>{for(const i of t){const a=await i.bind(this)(),l=this!==e.pendingRoute.get();if(e.pendingRoute.get()){if(l){e.pendingRoute.get().loaded.then(r).catch(s);return}else if(!a){e.pendingRoute.set(null);return}}else{r({route:e.activeRoute.get()});return}}const o=this.router.activeRoute.get();o&&e.history.push(o),e.activeRoute.set(this),e.afterUrlChange.run({route:this,history:[...e.history].reverse()}),e.pendingRoute.set(null),r({route:this})}),this.loaded}async loadComponents(){return await Promise.all(this.fragments.map(async e=>{const t=await e.node.module();e.node.module=()=>t})),!0}async runPreloads(){var t;const e={route:this,node:[...this.fragments].pop().node};for(const r of this.fragments)if(((t=r.node.module())==null?void 0:t.load)&&(r.load=await r.node.module().load(e),Object.assign(this.load,r.load),this.load.redirect))return this.router.url.replace(this.load.redirect);return this}async runGuards(){const e=this.fragments.map(t=>t.node.module()).filter(t=>t==null?void 0:t.guard);for(const t of e)if(console.warn('"guard" will be deprecated. Please use "load.redirect" instead.'),!await t.guard(this))return!1;return!0}async runBeforeUrlChangeHooks(){return await this.router.beforeUrlChange.run({route:this})}_createFragments(){const{url:e="",router:t}=this,{rootNode:r}=t;let s=[],o=r;const i=(u,f,g)=>{const _=new ae(this,u,f),m=u.name.match(/\[\.\.\.(.+)\]/);return m?g.push(f):g=[],m?_.setParams({[m[1]]:g}):_.setParams(_.getParamsFromFragment()),_},a=jt(e),l=[new ae(this,o,"")];for(let u=0;u<a.length;u++){const f=a[u],g=o.children.filter(m=>!m.name.startsWith("_")),_=g.find(m=>m.name===f)||g.sort(Pt).find(m=>m.regex.test(f));if(_)l.push(i(_,f,s)),o=_;else if(s.length)s.push(f);else{const m=Ot(l);if(m){const p=At(l,m),N=l.splice(p);u=u-N.length,l.push(i(m,a[u],s)),o=m}else{const p=o._fallback;if(!p)throw new Error(`router: "${t.name||"[default]"}" could not find route: ${e}`);l.splice(p.level),l.push(new ae(this,p,""));break}}}let c=l[l.length-1].node;for(;c;)c=c.children.find(u=>u.name==="index"),c&&l.push(new ae(this,c,""));if(!l.filter(({node:u})=>u.module).length)throw new Error(`could not find route: ${e}`);return l}}const Tt=n=>{const e=n.target.closest("a"),t=e&&e.href;if(n.ctrlKey||n.metaKey||n.altKey||n.shiftKey||n.button||n.key&&n.key!=="Enter"||n.defaultPrevented||!t||e.target||e.host!==location.host)return;const r=new URL(t),s=r.pathname+r.search+r.hash;return n.preventDefault(),s},Dt=n=>[...n].reduce((e,[t,r])=>(e[t]=r,e),{}),Bt=(n,e,t)=>{const r={};Object.entries(e).forEach(([o,i])=>{const a=new RegExp(`\\[${o}\\]|\\:${o}`);n.match(a)?n=n.replace(`[${o}]`,encodeURI(i)):r[o]=i});const s=t.router.queryHandler.stringify(r,t);return n+s},Lt=()=>(({pathname:n,search:e,hash:t})=>n+e+t)(window.location),Ve={get router(){return te("routify-fragment-context").route.router},get fragment(){return te("routify-fragment-context")}},Mt=n=>{try{return te(n)}catch{}},$e=(n,e)=>{const t=le(n,e);return Object.assign(t,{get:()=>O(t)})},Wt=(...n)=>n.map(e=>JSON.stringify([e==null?void 0:e.allFragments,e==null?void 0:e.url])).reduce((e,t)=>e===t&&t);class et{constructor(e){this.router=e,this.log=this.router.log}install(){}uninstall(){}reflect(){}}const zt=n=>{const e=(n==null?void 0:n.delimiter)||";";return{toRouter:(t,r)=>{const s=r.name?`${r.name}=(.+?)`:"(.+?)",o=new RegExp(`(^|${e})${s}(${e}|$)`),i=t.match(o);return i?i[2]:"/"},toBrowser:t=>t.map(r=>(r.name?`${r.name}=`:"")+r.url.external()).join(e)}};class Gt{constructor(){d(this,"instances",[]);d(this,"browserAdapter",zt());d(this,"urlFromBrowser",e=>this.browserAdapter.toRouter(Lt(),e));typeof window!="undefined"&&(window.__routify=this)}get routers(){return[].concat(...this.instances.map(e=>e.routers))}register(e){return this.instances.push(e),this}}const ce=new Gt,Jt=/\[(.+?)\]/gm;class Kt{constructor(e=Jt){d(this,"getFieldsFromName",e=>[...e.matchAll(this.RE)].map(t=>t[1]));d(this,"getRegexFromName",e=>new RegExp("^"+e.replace(this.RE,"(.+)")+"$"));d(this,"getValuesFromPath",(e,t)=>(t.match(e)||[]).slice(1));d(this,"mapFieldsWithValues",(e,t)=>this.haveEqualLength(e,t)&&e.reduce((r,s,o)=>(r[s]=t[o],r),{}));d(this,"haveEqualLength",(e,t)=>{if(e.length!==t.length)throw new Error(`fields and values should be of same length
fields: ${JSON.stringify(e)}
values: ${JSON.stringify(t)}`);return!0});this.RE=e}}class tt{constructor(e,t,r){d(this,"instance");d(this,"parent");d(this,"meta",{});d(this,"id");this.instance=r,this.name=e,r.nodeIndex.push(this),this.module=t,Object.defineProperty(this,"Instance",{enumerable:!1}),Object.defineProperty(this,"instance",{enumerable:!1}),Object.defineProperty(this,"parent",{enumerable:!1})}appendChild(e){e.parent=this}createChild(e,t){const r=this.instance.createNode(e,t);return this.appendChild(r),r}get descendants(){return this.instance.nodeIndex.filter(e=>e.ancestors.find(t=>t===this))}remove(){const{nodeIndex:e}=this.instance,t=e.findIndex(r=>r===this);e.splice(t,1)}get ancestors(){let e=this;const t=[];for(;e=e.parent;)t.push(e);return t}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get isRoot(){return this===this.root}get children(){return this.instance.nodeIndex.filter(e=>e.parent===this)}get level(){var e;return(((e=this.parent)==null?void 0:e.level)||0)+1}traverse(e){const t=e.startsWith("/")?this.root:this,r=e.split("/").filter(s=>s!==".").filter(Boolean);try{return r.reduce((o,i)=>i===".."?o.parent:o.children.find(a=>a.name===i),t)}catch(s){console.error("can't resolve path",e,"from",this.path,`
`,s)}}toJSON(){return W(S({},this),{children:[...this.children]})}get path(){return"/"+[this,...this.ancestors].reverse().map(e=>e.name).filter(Boolean).join("/")}}function Xt(n){let e;const t=n[4].default,r=be(t,n,n[5],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&32)&&we(r,t,s,s[5],e?ye(t,s[5],o,null):Re(s[5]),null)},i(s){e||(b(r,s),e=!0)},o(s){y(r,s),e=!1},d(s){r&&r.d(s)}}}function Qt(n){let e,t,r=n[2]&&nt(n);return{c(){r&&r.c(),e=R()},l(s){r&&r.l(s),e=R()},m(s,o){r&&r.m(s,o),x(s,e,o),t=!0},p(s,o){s[2]?r?(r.p(s,o),o&4&&b(r,1)):(r=nt(s),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(B(),y(r,1,1,()=>{r=null}),L())},i(s){t||(b(r),t=!0)},o(s){y(r),t=!1},d(s){r&&r.d(s),s&&w(e)}}}function nt(n){let e,t;const r=[n[1],{context:n[3]}];let s={$$slots:{default:[Yt]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)s=_e(s,r[o]);return e=new n[2]({props:s}),{c(){A(e.$$.fragment)},l(o){Q(e.$$.fragment,o)},m(o,i){I(e,o,i),t=!0},p(o,i){const a=i&10?Ye(r,[i&2&&xe(o[1]),i&8&&{context:o[3]}]):{};i&32&&(a.$$scope={dirty:i,ctx:o}),e.$set(a)},i(o){t||(b(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){F(e,o)}}}function Yt(n){let e;const t=n[4].default,r=be(t,n,n[5],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,o){r&&r.p&&(!e||o&32)&&we(r,t,s,s[5],e?ye(t,s[5],o,null):Re(s[5]),null)},i(s){e||(b(r,s),e=!0)},o(s){y(r,s),e=!1},d(s){r&&r.d(s)}}}function Zt(n){let e,t,r,s;const o=[Qt,Xt],i=[];function a(l,c){return l[0].module?0:1}return e=a(n),t=i[e]=o[e](n),{c(){t.c(),r=R()},l(l){t.l(l),r=R()},m(l,c){i[e].m(l,c),x(l,r,c),s=!0},p(l,[c]){let u=e;e=a(l),e===u?i[e].p(l,c):(B(),y(i[u],1,1,()=>{i[u]=null}),L(),t=i[e],t?t.p(l,c):(t=i[e]=o[e](l),t.c()),b(t,1),t.m(r.parentNode,r))},i(l){s||(b(t),s=!0)},o(l){y(t),s=!1},d(l){i[e].d(l),l&&w(r)}}}const rt="routify-fragment-context";function Vt(n,e,t){let{$$slots:r={},$$scope:s}=e,{node:o}=e,{passthrough:i}=e;const a=W(S({},te(rt)),{node:o});ze(rt,a);let l;return o.module&&o.getRawComponent().then(c=>t(2,l=c)),n.$$set=c=>{"node"in c&&t(0,o=c.node),"passthrough"in c&&t(1,i=c.passthrough),"$$scope"in c&&t(5,s=c.$$scope)},[o,i,l,a,r,s]}class $t extends ie{constructor(e){super();oe(this,e,Vt,Zt,z,{node:0,passthrough:1})}}var v;class en extends tt{constructor(){super(...arguments);ge(this,v,{});d(this,"importTree",e=>{const t=[[this,e]];for(;t.length;){const[s,o]=t.pop(),r=o,{children:i}=r,a=V(r,["children"]);Object.assign(s,a);for(const l of i){const c=s.createChild(o.name||o.rootName||"");t.push([c,l])}}return this})}get regex(){const{name:e}=this;return C(this,v)[e]||(C(this,v)[e]=this.instance.utils.getRegexFromName(this.name)),C(this,v)[e]}set regex(e){C(this,v)[this.name]=new RegExp(e)}get children(){return this.instance.nodeIndex.filter(t=>t.parent===this).sort((t,r)=>(t.meta.order||0)-(r.meta.order||0))}get pages(){return this.children.filter(e=>e.name!=="index").filter(e=>!e.meta.fallback).filter(e=>!e.name.startsWith("_")).filter(e=>!e.name.includes("[")).filter(e=>{var t;return((t=e.meta)==null?void 0:t.order)!==!1})}getRawComponent(){return this.module&&new Promise(e=>{const t=this.module(),r=t.then?t.then(s=>s.default):t.default;e(r)})}get component(){const e=this;return function(t){return t.props=W(S({},t.props),{passthrough:t.props,node:e}),new $t(S({},t))}}appendChild(e){e.instance&&(e.parent=this)}get _fallback(){var e;return this.children.find(t=>t.meta.fallback)||((e=this.parent)==null?void 0:e._fallback)}}v=new WeakMap;class tn{constructor(e){d(this,"Node",tt);d(this,"mode","runtime");d(this,"nodeIndex",[]);d(this,"rootNodes",{})}createNode(e,t){return new this.Node(e,t,this)}}class nn extends tn{constructor(e){super();d(this,"Node",en);d(this,"mode","runtime");d(this,"routers",[]);d(this,"rootNodes",{});this.options=e,e.routes&&(this.rootNodes[e.routes.rootName||"unnamed"]=this.createNode(e.routes.rootName).importTree(e.routes)),this.utils=new Kt,this.global=ce.register(this),Object.defineProperty(this,"routers",{enumerable:!1}),this.log=this.global.log}}const Ie=n=>{const e=[],t=r=>(e.push(r),()=>e.splice(e.indexOf(r),1));return t.hooks=e,t.run=n(e),t},rn=n=>Ie(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>o(i,...r)):o(s,...r),t)),H=n=>Ie(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>o(t,...r)):o(t,...r),t)),sn=n=>Ie(e=>(t,...r)=>e.reduce((s,o)=>(s==null?void 0:s.then)?s.then(i=>i&&o(t,...r)):s&&o(t,...r),t||!0));class on extends et{constructor(e){super(e);d(this,"reflect",()=>{const{mode:e}=O(this.router.activeRoute);if(e==="popState")return!1;const{routers:t,browserAdapter:r}=this.router.instance.global,s=t.filter(i=>i.urlReflector instanceof this.constructor),o=r.toBrowser(s);history[`${e}Native`]({},"",o)});const{instance:t,urlRewrites:r}=e,{urlFromBrowser:s,browserAdapter:o}=t.global;history.onPushstate||ln();const i=a=>function(l,c,u){var g,_;const f=(_=(g=l==null?void 0:l.routify)==null?void 0:g.router)!=null?_:!1;if(f===!1)u=o.toRouter(u,e);else if(f!==e.name)return!1;for(const m of r)u=m.toInternal(u,{router:e});e.url[a](u)};this.absorb=()=>e.url.replace(s(e)),this._pushstateHandler=i("push"),this._replacestateHandler=i("replace"),this._popstateHandler=()=>e.url.pop(s(e))}install(){this.hooks=[history.onPushstate(this._pushstateHandler),history.onReplacestate(this._replacestateHandler),history.onPopstate(this._popstateHandler)],O(this.router.activeRoute)?this.reflect():this.absorb()}uninstall(){this.hooks.forEach(e=>e()),setTimeout(()=>this.reflect())}}function ln(){const n={onPushstate:H(),onReplacestate:H(),onPopstate:H()};Object.assign(history,n);const{pushState:e,replaceState:t}=history;return history.pushStateNative=e,history.replaceStateNative=t,history.pushState=n.onPushstate.run,history.replaceState=n.onReplacestate.run,window.addEventListener("popstate",n.onPopstate.run),!0}class an extends et{}const cn=()=>new Promise(requestAnimationFrame),un=(n=100)=>new Promise(e=>{let t;const r=async s=>{clearTimeout(t),await cn(),t=setTimeout(()=>{e(),removeEventListener("scroll",r)},n)};addEventListener("scroll",r)}),fn=n=>ce.routers.find(e=>e.parentElem===n),hn=()=>{const n=le(!1);return{isScrolling:n,run:o=>{var i=o,{route:t,history:r}=i,s=V(i,["route","history"]);var _;const[a,l]=t.url.split("#"),[c,u]=((_=r[0])==null?void 0:_.url.split("#"))||[],f=async m=>{const p=a===c,N=document.getElementById(l);if(N&&N.scrollIntoView({behavior:p?"smooth":"auto"}),p&&N&&(n.set(!0),await un(),n.set(!1)),!p&&m){const k=new MutationObserver(()=>f());k.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),setTimeout(k.disconnect.bind(k),500)}},g=m=>{if(m){m.scrollTop=0;const p=m.parentElement;p&&p.scrollTo&&(p==null?void 0:p.dataset["routify-scroll"])!=="lock"&&!fn(p)&&g(m.parentElement)}};l?f(!0):g(t.router.parentElem)}}},dn={beforeRouterInit:({router:n})=>{const{isScrolling:e,run:t}=hn();n.afterUrlChange(t),n.scrollHandler={isScrolling:e}}};var mn=()=>({beforeUrlChange:({route:n})=>{const e=n.allFragments;return e.forEach(t=>{const{reset:r}=t.node.meta;if(r){const s=e.indexOf(t),o=r===!0?s:Number(r),i=s-o;e.splice(i,s)}}),!0}});const gn=n=>Object.fromEntries(Object.entries(n).filter(([e,t])=>t!=null)),st=(n,e)=>{e=e||{name:"",beforeRouterInit:[],afterRouterInit:[],urlRewrite:[],beforeUrlChange:[],afterUrlChange:[],transformFragments:[],onDestroy:[]};const o=n,{plugins:t}=o,r=V(o,["plugins"]);return[...t||[],r].forEach(i=>{"plugin"in i&&st(i,e),Object.entries(i).forEach(([a,l])=>{Array.isArray(e[a])?e[a].push(...[l].flat().filter(Boolean)):e[a]=l||e[a]})}),e},_n=[dn,mn()];var P;const Pe=class{constructor(e){d(this,"pendingRoute",$e(null));d(this,"activeRoute",$e(null));ge(this,P,null);d(this,"urlRewrites",[]);d(this,"beforeRouterInit",H());d(this,"afterRouterInit",H());d(this,"beforeUrlChange",sn());d(this,"afterUrlChange",H());d(this,"transformFragments",rn());d(this,"onDestroy",H());d(this,"parentElem",null);d(this,"queryHandler",{parse:(e,t)=>Dt(new URLSearchParams(e)),stringify:(e,t)=>{const r=new URLSearchParams(e).toString();return r?`?${r}`:""}});d(this,"url",{internal:()=>this.url.getPending()||this.url.getActive(),external:()=>this.getExternalUrl(),getActive:()=>{var e;return(e=O(this.activeRoute))==null?void 0:e.url},getPending:()=>{var e;return(e=O(this.pendingRoute))==null?void 0:e.url},toString:()=>this.url.internal(),set:this._setUrl,push:e=>this._setUrl(e,"pushState"),replace:e=>this._setUrl(e,"replaceState"),pop:e=>this._setUrl(e,"popState")});d(this,"ready",(()=>new Promise(e=>{let t;t=this.activeRoute.subscribe(r=>{r&&e(),t&&t()})}))());d(this,"history",[]);d(this,"setParentElem",e=>this.parentElem=e.parentElement);d(this,"getExternalUrl",e=>this.urlRewrites.reduce((r,s)=>s.toExternal(r,{router:this}),e||this.url.internal()));d(this,"getInternalUrl",e=>this.urlRewrites.reduce((t,r)=>r.toInternal(t,{router:this}),e));const{subscribe:t,set:r}=le(this);this.subscribe=t,this.triggerStore=()=>r(this),e.plugins=[...e.plugins||[],..._n].filter(Boolean),this.init(e),this.params=Ze(this.activeRoute,s=>s.params),this.afterUrlChange(()=>setTimeout(()=>C(this,P).reflect())),this.activeRoute.get=()=>O(this.activeRoute),this.pendingRoute.get=()=>O(this.pendingRoute)}init(e){const t=!this.options;e=gn(e),this.options=st(S(S({},this.options),e));let{instance:r,rootNode:s,name:o,routes:i,urlRewrite:a,urlReflector:l,url:c,passthrough:u,beforeUrlChange:f,afterUrlChange:g,transformFragments:_,onDestroy:m,beforeRouterInit:p,afterRouterInit:N,queryHandler:k}=this.options;k&&(this.queryHandler=k),f.forEach(this.beforeUrlChange),_.forEach(this.transformFragments),g.forEach(this.afterUrlChange),m.forEach(this.onDestroy),p.forEach(this.beforeRouterInit),N.forEach(this.afterRouterInit),this.beforeRouterInit.run({router:this,firstInit:t});const E=Mt("routify-fragment-context");this.instance=r||this.instance||(E==null?void 0:E.route.router.instance)||ce.instances[0]||new nn({}),this.name=o,this.urlRewrites=a,u&&!(u instanceof Pe)&&(u=(E==null?void 0:E.route.router)||u),this.passthrough=u||this.passthrough,ce.instances.forEach(q=>{const T=q.routers.indexOf(this);T!==-1&&q.routers.splice(T,1)}),this.instance.routers.push(this),i&&this.importRoutes(i),this.parentCmpCtx=E,this.rootNode=s||this.rootNode||this.instance.rootNodes.default,this.url.getActive()&&this._setUrl(this.url.getActive(),"pushState",!0),(!this.urlReflector||l&&!(this.urlReflector instanceof l))&&(l=l||(typeof window!="undefined"?on:an),this.setUrlReflector(l)),c&&this.url.replace(c),this.triggerStore(),this.afterRouterInit.run({router:this,firstInit:t})}importRoutes(e){this.rootNode=this.instance.createNode().importTree(e),this.instance.rootNodes[e.rootName||"unnamed"]=this.rootNode}async _setUrl(e,t,r){r||(e=this.getInternalUrl(e)),e=e||"/",e=e.replace(/(.+)\/+([#?]|$)/,"$1$2");const{activeRoute:s,pendingRoute:o}=this;s.get(),e.startsWith("/")||(e=e.replace(new URL(e).origin,""));const i=new qt(this,e,t),a=o.get()||s.get();return Wt(a,i)||(o.set(i),await i.loadRoute()),!0}destroy(){this.instance.routers=this.instance.routers.filter(e=>e!==this),this.onDestroy.run({router:this})}get urlReflector(){return C(this,P)}setUrlReflector(e){var t;(t=C(this,P))==null||t.uninstall(),qe(this,P,new e(this)),C(this,P).install(),this.triggerStore()}};let Fe=Pe;P=new WeakMap;const An=n=>new Fe(n);function pn(n){let e;const t=n[2].default,r=be(t,n,n[1],null);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,o){r&&r.m(s,o),e=!0},p(s,[o]){r&&r.p&&(!e||o&2)&&we(r,t,s,s[1],e?ye(t,s[1],o,null):Re(s[1]),null)},i(s){e||(b(r,s),e=!0)},o(s){y(r,s),e=!1},d(s){r&&r.d(s)}}}function bn(n,e,t){let{$$slots:r={},$$scope:s}=e,{context:o=null}=e;return n.$$set=i=>{"context"in i&&t(0,o=i.context),"$$scope"in i&&t(1,s=i.$$scope)},[o,s,r]}class ot extends ie{constructor(e){super();oe(this,e,bn,pn,z,{context:0})}}function it(n){let e,t;return e=new lt({props:{fragments:n[5],props:n[1],decorator:n[0]}}),{c(){A(e.$$.fragment)},l(r){Q(e.$$.fragment,r)},m(r,s){I(e,r,s),t=!0},p(r,s){const o={};s&32&&(o.fragments=r[5]),s&2&&(o.props=r[1]),s&1&&(o.decorator=r[0]),e.$set(o)},i(r){t||(b(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function yn(n){let e,t,r=n[5].length&&it(n);return{c(){r&&r.c(),e=R()},l(s){r&&r.l(s),e=R()},m(s,o){r&&r.m(s,o),x(s,e,o),t=!0},p(s,o){s[5].length?r?(r.p(s,o),o&32&&b(r,1)):(r=it(s),r.c(),b(r,1),r.m(e.parentNode,e)):r&&(B(),y(r,1,1,()=>{r=null}),L())},i(s){t||(b(r),t=!0)},o(s){y(r),t=!1},d(s){r&&r.d(s),s&&w(e)}}}function wn(n){var a;let e,t,r;const s=[{context:n[2]},n[1],(a=n[4])==null?void 0:a.props];var o=n[3].node.module().default;function i(l){let c={$$slots:{default:[yn,({props:u,decorator:f})=>({1:u,0:f}),({props:u,decorator:f})=>(u?2:0)|(f?1:0)]},$$scope:{ctx:l}};for(let u=0;u<s.length;u+=1)c=_e(c,s[u]);return{props:c}}return o&&(e=new o(i(n))),{c(){e&&A(e.$$.fragment),t=R()},l(l){e&&Q(e.$$.fragment,l),t=R()},m(l,c){e&&I(e,l,c),x(l,t,c),r=!0},p(l,c){var f;const u=c&22?Ye(s,[c&4&&{context:l[2]},c&2&&xe(l[1]),c&16&&xe((f=l[4])==null?void 0:f.props)]):{};if(c&547&&(u.$$scope={dirty:c,ctx:l}),o!==(o=l[3].node.module().default)){if(e){B();const g=e;y(g.$$.fragment,1,0,()=>{F(g,1)}),L()}o?(e=new o(i(l)),A(e.$$.fragment),b(e.$$.fragment,1),I(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(l){r||(e&&b(e.$$.fragment,l),r=!0)},o(l){e&&y(e.$$.fragment,l),r=!1},d(l){l&&w(t),e&&F(e,l)}}}function Rn(n){let e,t,r;var s=n[0]||ot;function o(i){return{props:{context:i[2],$$slots:{default:[wn]},$$scope:{ctx:i}}}}return s&&(e=new s(o(n))),{c(){e&&A(e.$$.fragment),t=R()},l(i){e&&Q(e.$$.fragment,i),t=R()},m(i,a){e&&I(e,i,a),x(i,t,a),r=!0},p(i,[a]){const l={};if(a&4&&(l.context=i[2]),a&575&&(l.$$scope={dirty:a,ctx:i}),s!==(s=i[0]||ot)){if(e){B();const c=e;y(c.$$.fragment,1,0,()=>{F(c,1)}),L()}s?(e=new s(o(i)),A(e.$$.fragment),b(e.$$.fragment,1),I(e,t.parentNode,t)):e=null}else s&&e.$set(l)},i(i){r||(e&&b(e.$$.fragment,i),r=!0)},o(i){e&&y(e.$$.fragment,i),r=!1},d(i){i&&w(t),e&&F(e,i)}}}function Nn(n,e,t){let r,s,o,i,a,{fragments:l}=e,{decorator:c=null}=e,{props:u={}}=e,f={};return ze("routify-fragment-context",f),n.$$set=g=>{"fragments"in g&&t(6,l=g.fragments),"decorator"in g&&t(0,c=g.decorator),"props"in g&&t(1,u=g.props)},n.$$.update=()=>{n.$$.dirty&64&&t(3,[r,...s]=[...l],r,(t(5,s),t(6,l))),n.$$.dirty&8&&t(7,{node:o,load:i,route:a}=r,o,(t(4,i),t(3,r),t(6,l)),(t(8,a),t(3,r),t(6,l))),n.$$.dirty&412&&t(2,f=Object.assign(f,{route:a,node:o,load:i,fragment:r}))},[c,u,f,r,i,s,l,o,a]}class lt extends ie{constructor(e){super();oe(this,e,Nn,Rn,z,{fragments:6,decorator:0,props:1})}}function at(n){let e,t,r,s,o,i;return t=new lt({props:{fragments:n[2],decorator:n[1]}}),{c(){e=Ne("div"),A(t.$$.fragment),this.h()},l(a){e=We(a,"DIV",{style:!0});var l=ke(e);Q(t.$$.fragment,l),l.forEach(w),this.h()},h(){Ut(e,"display","contents")},m(a,l){x(a,e,l),I(t,e,null),s=!0,o||(i=Le(r=n[5].call(null,e)),o=!0)},p(a,l){const c={};l&4&&(c.fragments=a[2]),l&2&&(c.decorator=a[1]),t.$set(c)},i(a){s||(b(t.$$.fragment,a),s=!0)},o(a){y(t.$$.fragment,a),s=!1},d(a){a&&w(e),F(t),o=!1,i()}}}function ct(n){let e,t,r,s;return{c(){e=Ne("div")},l(o){e=We(o,"DIV",{}),ke(e).forEach(w)},m(o,i){x(o,e,i),r||(s=Le(t=n[0].setParentElem(e)),r=!0)},d(o){o&&w(e),r=!1,s()}}}function En(n){let e,t,r,s=n[3]&&at(n),o=!n[0].parentElem&&ct(n);return{c(){s&&s.c(),e=Rt(),o&&o.c(),t=R()},l(i){s&&s.l(i),e=St(i),o&&o.l(i),t=R()},m(i,a){s&&s.m(i,a),x(i,e,a),o&&o.m(i,a),x(i,t,a),r=!0},p(i,[a]){i[3]?s?(s.p(i,a),a&8&&b(s,1)):(s=at(i),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(B(),y(s,1,1,()=>{s=null}),L()),i[0].parentElem?o&&(o.d(1),o=null):o||(o=ct(i),o.c(),o.m(t.parentNode,t))},i(i){r||(b(s),r=!0)},o(i){y(s),r=!1},d(i){s&&s.d(i),i&&w(e),o&&o.d(i),i&&w(t)}}}function kn(n,e,t){let r,s,o,i=U,a=()=>(i(),i=$(r,h=>t(3,o=h)),r);n.$$.on_destroy.push(()=>i());let{router:l=null}=e,{routes:c=null}=e,{decorator:u=null}=e,{urlReflector:f=null}=e,{instance:g=null}=e,{urlRewrite:_=null}=e,{url:m=null}=e,{name:p=null}=e,{rootNode:N=null}=e,{passthrough:k=null}=e,{beforeRouterInit:E=null}=e,{afterRouterInit:Y=null}=e,{beforeUrlChange:q=null}=e,{afterUrlChange:T=null}=e,{transformFragments:ue=null}=e,{onDestroy:fe=null}=e,{plugins:he=null}=e,{queryHandler:de=null}=e;const ft=h=>{l.passthrough||(h.addEventListener("click",Oe),h.addEventListener("keydown",Oe))},Oe=h=>{const je=Tt(h);je&&l.url.push(je)};return typeof window!="undefined"&&Ct(()=>l.destroy()),n.$$set=h=>{"router"in h&&t(0,l=h.router),"routes"in h&&t(6,c=h.routes),"decorator"in h&&t(1,u=h.decorator),"urlReflector"in h&&t(7,f=h.urlReflector),"instance"in h&&t(8,g=h.instance),"urlRewrite"in h&&t(9,_=h.urlRewrite),"url"in h&&t(10,m=h.url),"name"in h&&t(11,p=h.name),"rootNode"in h&&t(12,N=h.rootNode),"passthrough"in h&&t(13,k=h.passthrough),"beforeRouterInit"in h&&t(14,E=h.beforeRouterInit),"afterRouterInit"in h&&t(15,Y=h.afterRouterInit),"beforeUrlChange"in h&&t(16,q=h.beforeUrlChange),"afterUrlChange"in h&&t(17,T=h.afterUrlChange),"transformFragments"in h&&t(18,ue=h.transformFragments),"onDestroy"in h&&t(19,fe=h.onDestroy),"plugins"in h&&t(20,he=h.plugins),"queryHandler"in h&&t(21,de=h.queryHandler)},n.$$.update=()=>{if(n.$$.dirty&4193217){const h={instance:g,rootNode:N,name:p,routes:c,urlRewrite:_,urlReflector:f,passthrough:k,beforeRouterInit:E,afterRouterInit:Y,beforeUrlChange:q,afterUrlChange:T,transformFragments:ue,onDestroy:fe,plugins:he,queryHandler:de};l?l.init(h):t(0,l=new Fe(h))}n.$$.dirty&1025&&m&&m!==l.url.internal()&&l.url.replace(m),n.$$.dirty&1&&a(t(4,r=l.activeRoute)),n.$$.dirty&8&&t(2,s=(o==null?void 0:o.fragments)||[]),n.$$.dirty&5},[l,u,s,o,r,ft,c,f,g,_,m,p,N,k,E,Y,q,T,ue,fe,he,de]}class Hn extends ie{constructor(e){super();oe(this,e,kn,En,z,{router:0,routes:6,decorator:1,urlReflector:7,instance:8,urlRewrite:9,url:10,name:11,rootNode:12,passthrough:13,beforeRouterInit:14,afterRouterInit:15,beforeUrlChange:16,afterUrlChange:17,transformFragments:18,onDestroy:19,plugins:20,queryHandler:21})}}const ut=(n,e)=>{const t=[n,...n.ancestors],r=[e,...e.ancestors];return t.find(s=>r.includes(s))},Sn=(n,e)=>{const t=[n,...n.ancestors],r=[e,...e.ancestors],s=ut(n,e),o=t.indexOf(s),i=o?"../".repeat(o):"",a=r.indexOf(s),l=r.slice(0,a).reverse().map(c=>c.name).join("/");return i+l},vn={subscribe:(n,e)=>{const{router:t}=Ve,r=Ve.fragment.node;return Ze(t.activeRoute,s=>{const o=t.rootNode.traverse(r.path);return(i,a={})=>{const l=i.startsWith("/")?t.rootNode.path:"",c=o.traverse(l+i);if(!c){console.error("could not find destination node",i);return}const u=ut(c,t.rootNode),f="/"+Sn(u,c),g=S(S({},Un(c,s)),a),_=Bt(f,g,s);return t.getExternalUrl(_)}}).subscribe(n,e)}},Un=(n,e)=>{const r=[n,...n.ancestors].reverse().map(s=>{var o;return(o=e.allFragments.find(i=>i.node===s||i.node.path===s.path))==null?void 0:o.params});return Object.assign({},...r)};export{F as A,_e as B,le as C,jn as D,be as E,wt as F,we as G,Re as H,ye as I,U as J,An as K,Ut as L,xn as M,vn as N,Hn as R,ie as S,ke as a,In as b,We as c,w as d,Ne as e,x as f,kt as g,Fn as h,oe as i,Rt as j,R as k,St as l,B as m,y as n,L as o,b as p,ze as q,On as r,z as s,Ee as t,Pn as u,A as v,Q as w,I as x,Ye as y,xe as z};
